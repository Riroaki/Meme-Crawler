# æ¢—çˆ¬è™«

> åŸºäºScrapyå’ŒSeleniumçš„çˆ¬è™«ï¼Œçˆ¬å–å„ç§ç½‘ç»œçƒ­è¯åŠå…¶ç›¸å…³å†…å®¹ã€‚

### å…ˆåƒæˆ‘ä¸€å‘å®‰åˆ©ï¼šå§šæ˜æ˜¯jojoï¼

![](screenshots/å§šæ˜æ˜¯jojo.png)

## é¡¹ç›®ä»‹ç»

æœ¬é¡¹ç›®çˆ¬å–æ¢—ç›¸å…³çš„å›¾æ–‡ã€è§†é¢‘ç­‰å†…å®¹ã€‚é¦–å…ˆè¿›è¡Œæ¢—ç™¾ç§‘çš„çˆ¬å–ï¼š

- [x] [å°é¸¡ç™¾ç§‘](https://jikipedia.com)çš„æ‰€æœ‰æ¢—çš„æ¡ç›®ï¼ˆå­˜æ–‡å­—ã€å›¾ç‰‡é“¾æ¥ï¼‰

åœ¨æ¢—æ¡ç›®è¢«çˆ¬å–å®Œæ¯•åï¼Œæ ¹æ®æ¢—çš„åå­—çˆ¬å–ä»¥ä¸‹å†…å®¹ï¼š

- [x] [bç«™](https://bilibili.com)è§†é¢‘ï¼ˆavå·ï¼Œå¯ä»¥ç”Ÿæˆä¸ºå¤–é“¾æ’­æ”¾å™¨ï¼‰
- [x] [å¾®åš](https://weibo.com)ï¼ˆæ–‡æœ¬å†…å®¹ï¼‰
- [x] [è°·æ­Œ](https://google.com)å›¾ç‰‡å†…å®¹ï¼ˆéœ€è¦ç¿»å¢™ï¼‰

çˆ¬å–ä¸€å®šæ•°é‡åï¼Œæ‰§è¡Œè„šæœ¬åˆå¹¶æ•°æ®ï¼ŒæŠŠæ¯ä¸€ä¸ªæ¢—çš„æ•°æ®ä¿å­˜åˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ï¼Œå¹¶å¯¹æ¯ä¸€ä¸ªè¯æ¡è¯äº‘å…³é”®è¯è¯äº‘ã€‚

ä¸»è¦åŸºäº`Scrapy`å®ç°ï¼Œç»è¿‡æµ‹è¯•å‘ç°å°é¸¡ç™¾ç§‘ç­‰ç½‘ç«™å¯¹çˆ¬è™«çš„å°é”è¾ƒä¸¥ï¼Œæ•…åŠ å…¥`Selenium`ä½œä¸ºä¸­é—´ä»¶è¿›è¡Œç½‘é¡µè®¿é—®ï¼Œç„¶è€Œç›®å‰è¿˜æ˜¯å­˜åœ¨ipè¢«å°çš„å¯èƒ½â€¦â€¦åŠ¡å¿…è°¨æ…é©¾é©¶ã€‚

è°·æ­Œå›¾ç‰‡çˆ¬è™«åŸºäºä¸€ä¸ªç°æˆçš„pythonåº“`Google Images Download`å®Œæˆã€‚

## è¦æ±‚

### Pythonç¯å¢ƒ

- python==3.6.8
- scrapy==1.5.1
- selenium==3.141.0
- numpy==1.15.4
- google-images-download==2.8.0
- jieba==0.39
- tqdm==4.32.2
- wordcloud==1.5.0

### é©±åŠ¨

è¯·åœ¨`driver`æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®`chromedriver`é©±åŠ¨ã€‚

### åˆ†è¯ã€è¯äº‘ç›¸å…³

- åœ¨`stopwords`æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®ä¸­æ–‡åœè¯æ–‡ä»¶`stopwords.txt`ã€‚
- åœ¨`fonts`æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®å­—ä½“æ–‡ä»¶ã€‚

é»˜è®¤æ–‡ä»¶å·²ç»æ”¾ç½®ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¯·åœ¨`MemeCrawler/merge.py`ä¸­ä¿®æ”¹ã€‚

## è¿è¡Œ

### æ™®é€šçˆ¬è™«

åœ¨`MemeCrawler`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œ`run.sh`è„šæœ¬è¿›è¡Œçˆ¬å–ï¼š

```shell
$ ./run.sh [name] [time]
# name = ['jiki', 'webo', 'bilibili']
# time = frequency of checking process, int value, default = 4
```

å„ç§é…ç½®ï¼ˆç­‰å¾…æ—¶é—´ç­‰ï¼‰è¯¦è§`settings.py`ã€‚

### è°·æ­Œå›¾ç‰‡çˆ¬è™«

åœ¨`MemeCrawler`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œ`google.py`è„šæœ¬è¿›è¡Œçˆ¬å–ï¼š

```shell
$ python google.py
```

### åˆå¹¶æ•°æ®

åœ¨`MemeCrawler`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œ`merge.py`è„šæœ¬è¿›è¡Œåˆå¹¶æ•°æ®ï¼š

```shell
$ python merge.py
```

### æ³¨æ„

å¾®åšçˆ¬è™«ã€Bç«™çˆ¬è™«ã€è°·æ­Œçˆ¬è™«ä¸‰è€…ï¼Œå‡éœ€åœ¨å°é¸¡ç™¾ç§‘çˆ¬è™«æ‰§è¡Œåæ‰èƒ½çˆ¬å–ï¼ˆå› ä¸ºæ˜¯æ ¹æ®å°é¸¡ç™¾ç§‘çš„æ¡ç›®è¿›è¡Œçˆ¬å–ï¼‰ã€‚

## è¿è¡Œæˆªå›¾

> **æ³¨æ„**ï¼šå¯åœ¨`settings.py`ä¸­è‡ªé€‰æ˜¯å¦æ˜¾ç¤ºChromeæµè§ˆç•Œé¢ï¼ˆå‚è€ƒé…ç½®`SHOW_WINDOW`é»˜è®¤ä¸æ˜¾ç¤ºï¼‰

### Jikipediaâ€”â€”å°é¸¡è¯å…¸

æ­£å¸¸æƒ…å†µä¸‹æˆåŠŸè®¿é—®åï¼Œå¹¶ä¸”åœ¨éšæœºç­‰å¾…ï¼ˆæ¨¡æ‹Ÿé˜…è¯»è¿‡ç¨‹ï¼‰ä¹‹åï¼Œè¿›è¡Œä¸‹æ»‘é¡µé¢ã€éšæœºç‚¹èµğŸ‘çš„æ“ä½œï¼š

![success](screenshots/jikisuccess.png)

å¦‚é‡ä¸æµ‹ï¼ˆé—´éš”æ—¶é—´è¾ƒçŸ­æ—¶å¸¸ä¼šå‘ç”Ÿï¼‰å¯èƒ½è¢«é‡å®šå‘è‡³éªŒè¯ç é¡µé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹çˆ¬è™«ä¼šç­‰å¾…éªŒè¯ç æ¶ˆå¤±åé€€å‡ºï¼š

![moss](screenshots/jikimoss.png)

å¦‚æœå¤šæ¬¡è¢«å°ï¼Œå¯èƒ½å¯¼è‡´æš‚æ—¶æ— æ³•è®¿é—®ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å³å¯æ¢å¤ï¼š

![manual](screenshots/jikimanual.png)

ä¿å­˜çš„æ•°æ®ä¸º`json`æ ¼å¼ï¼š

![](screenshots/jikidata.png)

### Bilibiliâ€”â€”Bç«™

çˆ¬å–æ¢—ç›¸å…³çš„ç¬¬ä¸€é¡µè§†é¢‘æœç´¢ç»“æœã€‚

<s>è¿™ä¸ªå›¾çœŸä¸æ˜¯æˆ‘æœ‰æ„æˆªçš„ï¼Œä¸€æˆªå°±æˆªåˆ°è¿™ä¸ª</s>

![](screenshots/bilibilisuccess.png)

æœ¬åœ°ä¿å­˜ç»“æœï¼š

![](screenshots/bilibilidata.png)

é¡ºä¾¿ä¸€æï¼ŒBç«™å¥½åƒä¸ä¼šå°æˆ‘ï¼ŒçœŸæ˜¯è‰¯å¿ƒå“ˆå“ˆ

### Weiboâ€”â€”å¾®åš

çˆ¬å–æ¢—ç›¸å…³çš„å¾®åšç¬¬ä¸€é¡µå†…å®¹ã€‚

![](screenshots/weibosuccess.png)

å¾®åšæ•°æ®æ ¼å¼æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å…ˆä¿ç•™htmlæ ¼å¼çš„å†…å®¹â€¦â€¦ç­‰å¾…è¿›ä¸€æ­¥å¤„ç†ã€‚

![](screenshots/weibodata.png)

å¾®åšæ€»æ˜¯ç»™æˆ‘500å“åº”ï¼Œä¼°è®¡æ˜¯é™æµæ“ä½œã€‚

### Google imageâ€”â€”è°·æ­Œå›¾ç‰‡

**éœ€è¦æ‰“å¼€å…¨å±€ä»£ç†è¿è¡Œ**ã€‚

![](screenshots/googlesuccess.png)

å›¾ç‰‡ï¼šé»˜è®¤æ¯ä¸€ä¸ªè¯æ¡çˆ¬å–20å¼ ï¼Œå¹¶ä¸”æ”¾åœ¨å­æ–‡ä»¶å¤¹ä¸‹ã€‚

![](screenshots/googledata.png)

### åˆå¹¶æ•°æ®

âš ï¸æ³¨æ„ï¼šè¿™ä¸ªè¿‡ç¨‹è¿è¡Œç”±äºè¯äº‘éœ€è¦åˆ†è¯ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒæ…¢ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹`merge.py`ä¸­ä»£ç å–æ¶ˆç”Ÿæˆï¼ˆåˆ«é—®ä¸ºå•¥ä¸åšæˆå¯é…ç½®çš„ï¼Œæˆ‘æ‡’çš„æ”¹äº†= =ï¼‰

![](screenshots/merge.png)

åˆå¹¶åæ•°æ®æ ¼å¼ï¼š

```json
{
    "name": "test",
    "id": 0,
    "time": "2019-07-12",
    "img": "",
    "view": 1300,
    "like": 20,
    "dislike": 3,
    "tags": ["tag1", "tag2", "tag3"],
    "content": "PHP is the best programming language among the world.",
    "videoList": [
      {
        "aid": "12345678",
      	"title": "PHPHPHPHPHPHPHPHPHPHP",
      	"watch": "1ä¸‡",
      	"subtitle": "123",
      	"time": "2019-07-12",
      	"up": "aki",
      	"description": "hello world."
      }
    ],
    "imageList": [
      "https://img_url"
    ],
    "weiboList": [
      {
          "user": "aki",
          "avator": "https://avator_url",
          "time": "ä»Šå¤©12:00",
          "imgList": "https://img_url",
          "like": "1234",
          "repost": "1234",
          "source": "weibo.com",
          "content": "Life is short, I use python:)"
      }
    ]
  }
```

è¯äº‘å›¾ç‰‡ç¤ºä¾‹ï¼šã€Githubã€‘

![](screenshots/GitHub_wordcloud.png)